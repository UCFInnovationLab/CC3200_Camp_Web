{% extends "layout.html" %}
{% block body %}
    <script>
        var total = {{ total_connections | safe }},
            known = {{ known_connections | safe }},
            unknown = {{ unknown_connections | safe }};
    </script>
    <div id="current_box">
                <a href="/"><h4>Pyfi Monitor</h4></a>
        </div>
    <div class="container">
        
        <div class="row" id='top-row'>
                <div class="three columns">
                    <p class='bold-uppercase' id="connections">Latest Connections</p>
                    <p class="timesince" title="{{ time }}">{{ time }}</p>
                </div>
                <div class="three columns"><p id="total">Total: {{ total }}</p></div>
                <div class="three columns"><p id="known">Known: {{ known }}</p></div>
                <div class="three columns"><p id="unknown" title="Devices with no discernable MAC Address">Unkown: {{ unknown }}</p></div>
        </div>
        <div class="row">
            <div class="four columns">
                <p class='bold-uppercase inline'>FROM </p><p class="inline"><span class='time'>{{ startdate }}</span></p><br>
                <p class='bold-uppercase inline'>UNTIL </p><p class="inline"><span class='time'>{{ enddate }}</span></p>
            </div>
            <div class="four columns"><p>Total Unique Mac Addresses: {{ uniques }}</p></div>
            <div class="four columns u-pull-right">
                <form action="">
                    <input readonly type="text" id="dateselect" name="daterange" id="daterange" placeholder="Select Date Range">
                    <input type="button" id="daterangequery" class="button-primary" value="Update">
                </form>
            </div>
        </div>
        <div class="row">
                <canvas id="myChart"></canvas>
            
            
        </div>
        <table>
            {% if latest %}
            <caption>Latest Connected Devices</caption>
            <tr>
                <th>MAC Address</th>
                <th>IP Address</th>
                <th>Vendor</th>
                <th>Last Seen</th>
            </tr>
            {% for key, value in macs_vendors.iteritems() %}
            <tr>
                <td>{{ key }}</td>
                <td>{{ value[0] }}</td>
                <td>{{ value[1] }}</td>
                <td class="timesince" title="{{ value[1] }}">{{ value[2] }}</td>
            </tr>
            {% endfor %}
            {% else %}
            <caption>Connected Devices <p class="inline"><span class='time_simple'>{{ startdate }}</span></p> - <p class="inline"><span class='time_simple'>{{ enddate }}</span></p></caption>
            

            <tr>
                <th>MAC Address</th>
                <th>IP Address</th>
                <th>Vendor</th>
                <th>Last Seen</th>
            </tr>
            {% for key, value in macs_vendors.iteritems() %}
            <tr>
                <td>{{ key }}</td>
                <td>{{ value[0] }}</td>
                <td>{{ value[1] }}</td>
                <td class="time_simple" title="{{ value[1] }}">{{ value[2] }}</td>
            </tr>
            {% endfor %}
            {% endif %}
            
        </table>
    </div>

{% endblock %}                              